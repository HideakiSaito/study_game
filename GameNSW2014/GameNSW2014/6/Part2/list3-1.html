<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>3点を使って円を描画</title>
  <style>canvas { background-color: #d0d0d0; }</style>
</head>
<body onload="draw()">
<canvas id="canvas" width="600" height="600"></canvas>
<script>
var x1, y1; // 1点目
var x2, y2; // 2点目
var x3, y3; // 3点目
var cx, cy; // 円の中心
var n = 0; // 指定した点の個数

function draw() {
  // 描画コンテキストを取得
  var canvas = document.getElementById("canvas");
  var context = canvas.getContext("2d");
  //---------------------------------------------
  // マウスダウンイベント処理
  //---------------------------------------------
  canvas.onmousedown = function (e) {
    // 座標を調整
    var rect = e.target.getBoundingClientRect();
    mouseX = e.clientX - rect.left;
    mouseY = e.clientY - rect.top;
    context.beginPath();
    context.strokeStyle = "rgb(128, 128, 128)";
    switch (n) {
      case 0:
        // 1点目
        x1 = mouseX;
        y1 = mouseY;
        context.rect(x1, y1, 2, 2); // 点を描画
        n = 1;
        break;
      case 1:
        // 2点目
        x2 = mouseX;
        y2 = mouseY;
        context.rect(x2, y2, 2, 2); // 点を描画
        n = 2;
        break;
      case 2:
        // 3点目
        x3 = mouseX;
        y3 = mouseY;
        drawLine(); // 3点を結ぶ直線を描画
        calcCenter(); // 垂直二等分線の交点を計算
        drawCircle(); // 3点を通る円を描画
        n = 0; // 点の数を0に戻す
        break;
    }
    context.stroke();
  }
  //---------------------------------------------
  // 3点を結ぶ直線を描画
  //---------------------------------------------
  function drawLine() {
    // 3点を結ぶ直線
    context.beginPath();
    context.strokeStyle = "rgb(128, 128, 128)";
    context.moveTo(x1, y1);
    context.lineTo(x2, y2);
    context.lineTo(x3, y3);
    context.closePath();
    // 3点目を描画
    context.rect(x3, y3, 2, 2);
    context.stroke();
  }
  //---------------------------------------------
  // 垂直二等分線の交点を求める
  //---------------------------------------------
  function calcCenter() {
    // 直線(1)の式を求める
    var a = (y2 - y1) / (x2 - x1);
    var b = y1 - (a * x1);
    // 直線(1)の中点を求める
    var mx1 = x1 + ((x2 - x1) / 2);
    var my1 = y1 + ((y2 - y1) / 2);
    // 直線(1)の垂直二等分線の式を求める
    var aa = -1 / a;
    var bb = my1 - (aa * mx1);
    // 直線(2)の式を求める
    var c = (y3 - y2) / (x3 - x2);
    var d = y2 - (c * x2);
    // 直線(2)の中点を求める
    var mx2 = x2 + ((x3 - x2) / 2);
    var my2 = y2 + ((y3 - y2) / 2);
    // 直線(2)の垂直二等分線の式を求める
    var cc = -1 / c;
    var dd = my2 - (cc * mx2);
    // 二つの垂直二等分線の交点を求める
    var z = 1 / (-aa + cc);
    cx = z * -1 * -bb + z * 1 * -dd;
    cy = z * -cc * -bb + z * aa * -dd;
    // 垂直二等分線を描画
    context.strokeStyle = "rgb(0, 255, 0)"
    context.beginPath();
    context.moveTo(cx, cy);
    context.lineTo(mx1, my1);
    context.stroke();
    //
    context.beginPath();
    context.moveTo(cx, cy);
    context.lineTo(mx2, my2);
    context.stroke();
  }
  //---------------------------------------------
  // 3点を通る円を描画
  //---------------------------------------------
  function drawCircle() {
    // 円の半径（1点目と円の中心の距離）を求める
    var r = Math.sqrt((cx - x1) * (cx - x1) + (cy - y1) * (cy - y1));
    // 円を描画
    context.beginPath();
    context.strokeStyle = "rgb(255, 0, 0)";
    context.arc(cx, cy, r, 0, 360 * Math.PI / 180, true);
    context.stroke();
  }
}
</script>
</body>
</html>